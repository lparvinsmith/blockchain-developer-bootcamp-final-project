(this["webpackJsonpretroactive-funding-client"]=this["webpackJsonpretroactive-funding-client"]||[]).push([[0],{36:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint256","name":"initBuyin","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"candidateAddress","type":"address"}],"name":"CandidateRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"voterAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"contractBalance","type":"uint256"}],"name":"VoterRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"winnerAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"totalWinnings","type":"uint256"}],"name":"WeHaveAWinner","type":"event"},{"stateMutability":"payable","type":"fallback"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_admins","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"buyin","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"candidates","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentWinner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"mostVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"projectSubmissionOpen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"registerCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"registerVoter","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"addresses","type":"address[]"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"setBuyin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setProjectSubmissionClosed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setProjectSubmissionOpen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setVoterRegistrationClosed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setVoterRegistrationOpen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setVotingClosed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setVotingOpen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tokenVoteCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenVoted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"candidateAddress","type":"address"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"voterRegistrationOpen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingOpen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},43:function(e,t,n){},44:function(e,t,n){},48:function(e,t){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(6),s=n.n(a),i=n(31),r=n.n(i),o=(n(43),n(44),n(14)),c=n(5),u=Object(a.createContext)(void 0),p=function(e){var t,n,a=e.children;try{n=new o.a.providers.Web3Provider(window.ethereum)}catch(i){n=void 0}var s=null===(t=n)||void 0===t?void 0:t.getSigner();return Object(c.jsx)(u.Provider,{value:{provider:n,signer:s},children:a})},d=n(2),l=n.n(d),y=n(35),b=n(8),m=Object(a.createContext)(void 0),j=function(e){var t=e.children,n=Object(a.useState)(void 0),s=Object(b.a)(n,2),i=s[0],r=s[1];return Object(c.jsx)(m.Provider,{value:{account:i,setAccount:r},children:t})},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e?!!e&&"".concat(e.substring(0,t+2),"...").concat(e.substring(e.length-t-1)):""},f=(n(59),function(e){var t=e.onClick,n=e.disabled,a=e.children;return Object(c.jsx)("button",{className:"button",onClick:t,disabled:n,children:a})}),O=(n(60),function(){var e=Object(a.useContext)(m),t=e.account,n=e.setAccount,s=Object(a.useState)(!1),i=Object(b.a)(s,2),r=i[0],o=i[1],u=function(){var e=Object(y.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,null===(t=window.ethereum)||void 0===t?void 0:t.request({method:"eth_requestAccounts"});case 4:a=e.sent,n(a[0]),o(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error connecting wallet"),o(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return t?Object(c.jsx)("div",{className:"WalletStatus",children:Object(c.jsx)("div",{className:"WalletStatus-message",children:"Wallet ".concat(v(t)," connected")})}):Object(c.jsx)("div",{className:"WalletStatus",children:Object(c.jsx)(f,{onClick:u,disabled:r,children:"Connect your wallet"})})}),x=n(36),h=Object(a.createContext)(void 0),T=function(e){var t=e.children,n=Object(a.useContext)(u).signer,s=new o.a.Contract("0xaceb4dab6f366e57c3368584372ea6fa2781522f",x,n);return Object(c.jsx)(h.Provider,{value:{contract:s},children:t})},g=(n(61),function(e){var t=e.placeholder,n=e.value,a=e.onChange;return Object(c.jsx)("input",{className:"TextInput",placeholder:t,value:n,onChange:a})}),C=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useState)(""),n=Object(b.a)(t,2),s=n[0],i=n[1];return e.buyin().then((function(e){return i(e.toString())})),s},M=Object(a.createContext)(void 0),A=function(e){var t=e.children,n=Object(a.useState)(void 0),s=Object(b.a)(n,2),i=s[0],r=s[1];return Object(c.jsx)(M.Provider,{value:{message:i,addMessage:function(e,t){r({text:e,type:t}),setTimeout((function(){r(void 0)}),5e3)}},children:t})},w=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useState)(!1),n=Object(b.a)(t,2),s=n[0],i=n[1];return e.votingOpen().then((function(e){return i(e)})),s},N=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useState)(!1),n=Object(b.a)(t,2),s=n[0],i=n[1];return e.voterRegistrationOpen().then((function(e){return i(e)})),s},k=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],i=C(),r=w(),o=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useContext)(M).addMessage;return function(){e.setVotingOpen().then((function(e){console.log("result",e),t("Voting is open","success")})).catch((function(e){t(e.message,"error")}))}}(),u=N(),p=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useContext)(M).addMessage;return function(){e.setVoterRegistrationClosed().then((function(e){console.log("result",e),t("Voter registration is closed","success")})).catch((function(e){t(e.message,"error")}))}}(),d=Object(a.useContext)(M).addMessage,l=function(){d("Coming soon! This is a work in progress")};return Object(c.jsxs)("div",{className:"AdminActions",children:[Object(c.jsx)("div",{className:"ContractActions-title",onClick:function(){return s(!n)},children:"Admin"}),n&&Object(c.jsxs)("div",{className:"ContractActions-body",children:[Object(c.jsxs)("div",{className:"ContractActions-action",children:[Object(c.jsx)("div",{className:"ContractActions-label",children:"Current buyin: ".concat(i," wei")}),Object(c.jsx)(g,{placeholder:"update amount in wei"}),Object(c.jsx)(f,{onClick:l,children:"Update"})]}),Object(c.jsxs)("div",{className:"ContractActions-action",children:[Object(c.jsx)("div",{className:"ContractActions-label",children:"Voter registration is ".concat(u?"":"not ","open")}),Object(c.jsx)(f,{onClick:function(){p()},children:"Close voter registration"})]}),Object(c.jsx)("div",{className:"ContractActions-action",children:Object(c.jsx)(f,{onClick:l,children:"Close candidate registration"})}),Object(c.jsxs)("div",{className:"ContractActions-action",children:[Object(c.jsx)("div",{className:"ContractActions-label",children:"Voting is ".concat(r?"":"not ","open")}),Object(c.jsx)(f,{onClick:function(){o()},children:"Open voting"})]})]})]})},S=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],i=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useState)(!1),n=Object(b.a)(t,2),s=n[0],i=n[1];return e.projectSubmissionOpen().then((function(e){return i(e)})),s}(),r=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useContext)(M).addMessage;return function(){e.registerCandidate().then((function(e){console.log("result",e),t("Candidate has been registered","success")})).catch((function(e){t(e.message,"error")}))}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"ContractActions-title",onClick:function(){return s(!n)},children:"Candidates"}),n&&Object(c.jsx)("div",{className:"ContractActions-body",children:i?Object(c.jsxs)("div",{className:"ContractActions-action",children:[Object(c.jsx)("div",{className:"ContractActions-label",children:"Register your project"}),Object(c.jsx)(f,{onClick:function(){r()},children:"Become a candidate"})]}):Object(c.jsx)("div",{className:"ContractActions-action",children:Object(c.jsx)("div",{className:"ContractActions-label",children:"Registration closed"})})})]})},R=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(""),r=Object(b.a)(i,2),u=r[0],p=r[1],d=C(),l=N(),y=w(),m=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useContext)(M).addMessage,n=C();return function(){e.registerVoter({value:n}).then((function(e){console.log("result",e);var n="Voter successfully registered, see https://rinkeby.etherscan.io/tx/".concat(e.hash);t(n,"success")})).catch((function(e){t(e.message,"error")}))}}(),j=function(){var e=Object(a.useContext)(h).contract,t=Object(a.useContext)(M).addMessage;return function(n){e.vote(n).then((function(e){console.log("result",e),t("Voter successfully registered","success")})).catch((function(e){t(e.message,"error")}))}}(),v=Object(a.useContext)(M).addMessage;return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"ContractActions-title",onClick:function(){return s(!n)},children:"Voters"}),n&&Object(c.jsxs)("div",{className:"ContractActions-body",children:[l&&Object(c.jsxs)("div",{className:"ContractActions-action",children:[Object(c.jsx)("div",{className:"ContractActions-label",children:"Voter NFT costs ".concat(d," wei")}),Object(c.jsx)(f,{onClick:function(){m()},children:"Mint voter NFT"})]}),y&&Object(c.jsxs)("div",{className:"ContractActions-action",children:[Object(c.jsx)("div",{className:"ContractActions-label",children:"Vote for a project"}),Object(c.jsx)(g,{placeholder:"project address",value:u,onChange:function(e){var t=e.target.value;p(t)}}),Object(c.jsx)(f,{onClick:function(){var e=u.trim();o.a.utils.isAddress(e)?j(e):v("Must use valid ETH address")},children:"Vote"})]})]})]})},V=(n(62),function(){return Object(c.jsxs)("div",{className:"ContractActions",children:[Object(c.jsx)(k,{}),Object(c.jsx)(R,{}),Object(c.jsx)(S,{})]})}),I=(n(63),function(){var e=Object(a.useContext)(M).message;return Object(c.jsx)("div",{className:"Message",children:e&&Object(c.jsx)("div",{className:"Message-text ".concat(e.type),children:e.text})})});var F=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(A,{children:Object(c.jsx)(p,{children:Object(c.jsxs)(j,{children:[Object(c.jsxs)("div",{className:"App-header",children:[Object(c.jsx)("div",{className:"App-title",children:"Retroactive Funding DAO \ud83d\udd7a"}),Object(c.jsx)(I,{}),Object(c.jsx)(O,{})]}),Object(c.jsx)("div",{className:"App-body",children:Object(c.jsx)(T,{children:Object(c.jsx)(V,{})})})]})})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root")),P()}},[[64,1,2]]]);
//# sourceMappingURL=main.394f493e.chunk.js.map